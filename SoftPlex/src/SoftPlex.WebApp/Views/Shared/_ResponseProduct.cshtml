@using Microsoft.AspNetCore.Mvc.TagHelpers
@using SoftPlex.Contracts.Response
@model List<SoftPlex.Contracts.Response.ResponseProduct>

@foreach (ResponseProduct item in Model)
{
	<tr>
		<td>
			@if (Model.Count() == 1)
			{
				@item.Name
			}
			else
			{
				<a class="nav-link text-dark"
				   asp-area=""
				   asp-controller="Product"
				   asp-action="Detail"
				   asp-route-id="@item.Id">@item.Name</a>
			}
			(@item.Id)
		</td>
		<td>@item.Description</td>
		<td>
			@if (@item.ProductVersions is not null && @item.ProductVersions.Count() > 0)
			{
				@foreach (var productVersion in @item.ProductVersions)
				{
					<div class="product_versions_block">
						<table>
							<tr>
								<th>Id</th>
								<td>@productVersion.Id</td>
							</tr>
							<tr>
								<th>Name</th>
								<td>@productVersion.Name</td>
							</tr>
							<tr>
								<th>Description</th>
								<td>@productVersion.Description</td>
							</tr>
							<tr>
								<th>SizeBox</th>
								<td>
									@productVersion.SizeBox.Height x @productVersion.SizeBox.Width x @productVersion.SizeBox.Length
								</td>
							</tr>
						</table>
					</div>
				}
			}
		</td>
		@if (User.Identity.IsAuthenticated)
		{
			<td class="js-button_add-res__wrapp">
				<a class="nav-link text-dark js-button_add-res__button" href="#">Edit product</a>

				<a class="nav-link text-dark"
				onclick="return confirm('Are you sure you want to delete this item?');"
				asp-controller="Product"
				asp-action="RemoveProduct"
				asp-route-id="@item.Id">Remove</a>

				<div class="js-button_add-res__form" style="display: none;">

					<partial name="_PopUpInnerForm" model="item" />

				</div>
			</td>
		}
	</tr>
}
@*
@foreach (ResponseProduct item in Model)
{
	<tr>
		@if (User.Identity.IsAuthenticated)
		{
			<td class="js-button_add-res__wrapp">
				<a class="nav-link text-dark js-button_add-res__button" href="#">Edit product</a>

				<a class="nav-link text-dark"
				   onclick="return confirm('Are you sure you want to delete this item?');"
				   asp-controller="Product"
				   asp-action="RemoveProduct"
				   asp-route-id="@item.Id">Remove</a>

				<div class="js-button_add-res__form" style="display: block;">
					<partial name="_PopUpInnerForm" />

						<input type="text" name="name_product_id" value="@item.Id">	<input type="text" name="name_product" value="@item.Name">
						<input type="text" name="description_product" value="@item.Description">
						@foreach (var productVersion in @item.ProductVersions)
						{
							<input type="text" name="productversion_guid" value="@productVersion.Id">
							<input type="text" name="name" value="@productVersion.Name">
							<input type="text" name="description" value="@productVersion.Description">
							<input type="text" name="height" value="@productVersion.SizeBox.Height">
							<input type="text" name="width" value="@productVersion.SizeBox.Width">
							<input type="text" name="length" value="@productVersion.SizeBox.Length">
						}
						@for (int i = 1; i < 3; i++)
						{
							<input type="text" name="productversion_guid" value="@Guid.NewGuid()">
							<input type="text" name="name" value="">
							<input type="text" name="description" value="">
							<input type="text" name="height" value="">
							<input type="text" name="width" value="">
							<input type="text" name="length" value="">
						}

				</div>
			</td>
		}
	</tr>
}
*@
